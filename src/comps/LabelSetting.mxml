<?xml version="1.0" encoding="utf-8"?>
<s:BorderContainer xmlns:fx="http://ns.adobe.com/mxml/2009" 
		  xmlns:s="library://ns.adobe.com/flex/spark"
		  implements="interf.IStateChanged">
	<s:layout>
		<s:HorizontalLayout paddingBottom="5" paddingLeft="5" paddingRight="5" paddingTop="5"/>
	</s:layout>
	<s:VGroup width="80" height="100%">
		<s:Label text="帧列表"/>
		<s:List id="frameList" width="100%" height="100%" dataProvider="{frameAC}" selectedIndex="@{frameNS.value}" allowMultipleSelection="true" change="handler_frameChange(event)"/>
		<s:NumericStepper id="frameNS" width="100%" value="@{frameList.selectedIndex}" minimum="0" maximum="{frameList.dataProvider.length-1}" change="handler_frameChange(event)"/>
	</s:VGroup>
	<s:Group width="100%" height="100%">
		<s:VGroup top="20" bottom="28" width="30" enabled="{labelCB.selected}" verticalAlign="middle">
			<s:Button id="addLabelBTN" label="&gt;" width="100%" toolTip="添加一个Label到列表中" 
					  enabled="{labelCB.selected&amp;&amp;frameList.selectedItem&amp;&amp;labelInput.text}"/>
			<s:Button id="removeLabelBTN" label="&lt;" width="100%" toolTip="删除选中的Label" 
					  enabled="{labelCB.selected&amp;&amp;labelList.selectedItem}"/>
		</s:VGroup>
		<s:CheckBox id="labelCB" left="5" top="-2" label="使用Label"/>
		<s:List id="labelList" left="35" top="18" bottom="28" width="100%"
				enabled="{labelCB.selected}" dataProvider="{labelAL}"/>
		<s:HGroup x="0" bottom="0" width="100%" enabled="{labelCB.selected}">
			<s:TextInput id="labelInput" width="100%" text="{labelList.selectedItem}"
						 toolTip="label格式：英文+数字"/>
			<s:Button id="renameBTN" label="改" width="35" toolTip="修改Label名称" click="handler_renameBTNclick(event)"
					  enabled="{labelCB.selected&amp;&amp;labelInput.text&amp;&amp;(labelList.selectedItem||frameList.selectedItem)}"/>
		</s:HGroup>
	</s:Group>
	<fx:Metadata>
		[Event(name="frameChange", type="events.InfoEvent")]
	</fx:Metadata>
	<fx:Script>
	<![CDATA[
		import events.InfoEvent;
		
		import mx.collections.ArrayCollection;
		import mx.collections.ArrayList;
		
		[Bindable] public var frameAC:ArrayCollection;
		[Bindable] public var labelAL:ArrayList;
		
		public function updateOnStateChanged($old:String, $new:String):void
		{
		}
		
		protected function handler_renameBTNclick($event:MouseEvent):void
		{
			labelAL.addItem({label:labelInput.text, frame:frameList.selectedIndices});
		}
		
		protected function handler_frameChange($event:Event):void
		{
			dispatchEvent(new InfoEvent(InfoEvent.FRAME_CHANGE, frameNS.value));
		}
		
	]]>
	</fx:Script>
</s:BorderContainer>
